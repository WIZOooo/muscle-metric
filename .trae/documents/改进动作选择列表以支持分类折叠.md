# 改进动作选择列表，支持按分类折叠（默认折叠）

根据您的反馈，我将调整方案以确保所有分类默认处于折叠状态。

## 实现步骤

### 1. 创建 `ActionSelectionListView` 视图
在 `AddTrainingRecordView.swift` 文件中添加一个新的视图结构体 `ActionSelectionListView`。
*   **功能**: 接收动作数据列表，按 `category` 分组展示。
*   **状态管理**: 使用 `@State private var expandedCategories: Set<String> = []` 来跟踪当前展开的分类。初始为空集合，**确保默认所有分类都是折叠的**。
*   **UI结构**:
    *   使用 `List` 展示分类列表。
    *   使用 `DisclosureGroup(isExpanded: ...)` 绑定展开状态。
    *   点击分类标题展开/折叠。
    *   点击具体动作项选中并返回。

### 2. 修改 `ActionPicker` 组件
修改现有的 `ActionPicker` 视图，将 Picker 替换为导航链接。
*   **交互**: 点击“动作”行跳转到 `ActionSelectionListView`。
*   **显示**: 显示当前选中的动作名称。

## 代码变更概览

**ActionSelectionListView (新增)**:
```swift
struct ActionSelectionListView: View {
    let actions: [TrainingTag]
    @Binding var selection: TrainingTag?
    @Environment(\.dismiss) private var dismiss
    
    // 默认所有分类折叠 (空集合)
    @State private var expandedCategories: Set<String> = []

    var body: some View {
        List {
            ForEach(sortedCategories, id: \.self) { category in
                DisclosureGroup(
                    isExpanded: Binding(
                        get: { expandedCategories.contains(category) },
                        set: { isExpanded in
                            if isExpanded {
                                expandedCategories.insert(category)
                            } else {
                                expandedCategories.remove(category)
                            }
                        }
                    ),
                    content: {
                        // ... 动作列表 ...
                    },
                    label: { Text(category) }
                )
            }
        }
    }
}
```

**ActionPicker (修改)**:
```swift
// 替换为 NavigationLink 跳转到 ActionSelectionListView
NavigationLink(destination: ActionSelectionListView(actions: Array(actions), selection: $selection)) {
    // ...
}
```
