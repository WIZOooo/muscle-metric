# 增加食物搜索功能计划

用户希望在「选择食物」页面增加搜索功能，以便快速查找已录入的食物。我们将通过在 `FoodPickerView` 中添加搜索栏并根据输入内容过滤食物列表来实现此功能。

## 修改文件
`MuscleMetric/Views/DietRecord/AddDietRecordView.swift`

## 具体步骤

1.  **添加搜索状态**
    在 `FoodPickerView` 结构体中添加一个 `@State` 属性用于存储搜索文本：
    ```swift
    @State private var searchText = ""
    ```

2.  **实现过滤逻辑**
    添加一个计算属性 `filteredFoods`，根据 `searchText` 是否为空来返回全部食物或过滤后的食物：
    ```swift
    var filteredFoods: [DietTag] {
        if searchText.isEmpty {
            return Array(allFoods)
        } else {
            return allFoods.filter { ($0.name ?? "").localizedCaseInsensitiveContains(searchText) }
        }
    }
    ```

3.  **更新列表显示**
    将 `List` 中的 `ForEach(allFoods)` 修改为 `ForEach(filteredFoods)`，以显示过滤后的结果。

4.  **添加搜索修饰符**
    在 `List` 上添加 `.searchable(text: $searchText, prompt: "搜索食物")` 修饰符，启用系统原生的搜索栏。

## 验证
- 进入「新建饮食记录」页面。
- 点击「添加食物」进入「选择食物」页面。
- 确认页面顶部出现搜索栏。
- 输入关键字，确认列表实时过滤显示匹配的食物。
- 清空搜索栏，确认列表恢复显示所有食物。
